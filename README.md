# SOLID for components

Модуль болванка для отслеживания соблюдения принципов SOLID для компонентов по Бобу Мартину. Подробное описание тут https://habr.com/ru/companies/qiwi/articles/697946/
В дополнении к 3 принципам добавлена возможность анализировать устаревшие зависимости через анализ репозиториев.

Для проверки соблюдения принципов циклических зависимостей и устойчивых зависимостей в сервисе данные о связанности достаются из БД. 
Вы можете использовать свой источник реализовав интерфейс ModuleInfoDao. В вашем источнике должны быть данные о том, 
с какими компонентами связан ваш сервис (на первой стадии такое хранилище можно подготовить вручную).

Для проверки соблюдения принципа стабильных абстракций используется исходный код сервиса. Для этого в вашем хранилище должна содержаться ссылка
на исходный код сервиса. Сейчас поддерживаются языки Java и Kotlin, но расширить можно добавив реализацию CodeAnalyzer. Отклонение от
главное последовательности настраивается через параметр max-distance-from-optimal-diagonal в application.yml.

Для проверки зависимостей, которые пора обновить используется настройка legacy-code -> dependencies в application.yml.

### Как начать работать:
- Клоним репозиторий и реализуем свое хранилище с сервисами
- Реализуем слой доступа к этому хранилищу через имплементацию ModuleInfoDao
- Устанавливаем свои переменные среды в application.yml
- Делаем запрос rest с названием модуля для проверки вашего сервиса на нарушение принципов как в тесте ModulesQualityServiceTest
- Неспешно начинаем работу над исправлением...

Так же в сервисе реализована проверка того, в какую сторону изменятся метрики нарушения принципов при добавлении или удалении
связей. Для этого на локалке надо запустить сервис StableDependencyViolationFixHelper и передать в него объект DependencyChange (он
выглядит как - добавить новую связь к компоненту или разорвать ее).

P.S. Я считаю что общение сервисов через Kafka или REST является связью сервисов, так как между ними существует контракт. Считать
ли связью Event Sourcing при наличии схемы в инструменте подобном avro или в отдельной либе - вопрос открытый.